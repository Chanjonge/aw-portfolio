# 회원 관리 시스템 가이드

## ✅ 완료된 작업

일반 회원 관리 시스템이 구축되었습니다!

### 🎉 주요 기능

1. **관리자 기능**

    - 회원 계정 생성 (아이디, 비밀번호, 상호명)
    - 회원 목록 조회
    - 회원 활성화/비활성화
    - 회원 삭제
    - 마지막 로그인 시간 확인

2. **회원 기능**
    - 전용 로그인 페이지
    - 회원 전용 대시보드
    - 개인 정보 확인

---

## 📋 시스템 구조

### 데이터베이스 (MongoDB)

**Member 모델:**

```typescript
- id: 고유 ID
- username: 아이디 (중복 불가)
- password: 비밀번호 (해시됨)
- companyName: 상호명
- isActive: 활성/비활성 상태
- createdAt: 생성일
- createdBy: 생성한 관리자 ID
- lastLogin: 마지막 로그인 시간
```

### API 엔드포인트

1. **GET /api/members** - 회원 목록 조회 (관리자만)
2. **POST /api/members** - 회원 생성 (관리자만)
3. **PATCH /api/members/[id]** - 회원 정보 수정 (관리자만)
4. **DELETE /api/members/[id]** - 회원 삭제 (관리자만)
5. **POST /api/auth/member-login** - 회원 로그인

### 페이지

1. **관리자 페이지**
    - `/admin/super` → "회원 관리" 탭
2. **회원 페이지**
    - `/member/login` → 회원 로그인
    - `/member/dashboard` → 회원 전용 대시보드

---

## 🔧 사용 방법

### 1️⃣ 관리자: 회원 생성

1. 관리자 로그인: `https://aw-portfolio-chi.vercel.app/admin/login`
2. Super Admin 페이지 → **"회원 관리"** 탭 클릭
3. **"+ 회원 추가"** 버튼 클릭
4. 정보 입력:
    - **아이디**: 3자 이상 (중복 불가)
    - **비밀번호**: 4자 이상
    - **상호명**: 회사 또는 개인 상호명
5. **"생성"** 버튼 클릭

### 2️⃣ 회원: 로그인

1. 회원 로그인 페이지: `https://aw-portfolio-chi.vercel.app/member/login`
2. 관리자가 생성한 아이디/비밀번호 입력
3. **"로그인"** 버튼 클릭
4. 회원 대시보드로 자동 이동

### 3️⃣ 관리자: 회원 관리

**회원 목록에서 가능한 작업:**

-   **활성화/비활성화**: 비활성화된 회원은 로그인 불가
-   **삭제**: 회원 계정 완전 삭제
-   **정보 확인**: 마지막 로그인 시간, 생성일 등

---

## 🎯 사용 예시

### 시나리오 1: 새 회원 추가

```
관리자가 "ABC 회사" 회원을 추가하려고 함

1. 회원 관리 탭 → 회원 추가
2. 아이디: abc_company
3. 비밀번호: pass1234
4. 상호명: ABC 회사
5. 생성 클릭

→ 회원 생성 완료!
→ 회원은 /member/login에서 로그인 가능
```

### 시나리오 2: 회원 로그인

```
ABC 회사 담당자가 로그인

1. https://aw-portfolio-chi.vercel.app/member/login 접속
2. 아이디: abc_company
3. 비밀번호: pass1234
4. 로그인 클릭

→ 회원 대시보드로 이동
→ 회사 정보 및 전용 기능 이용 가능
```

### 시나리오 3: 회원 비활성화

```
관리자가 특정 회원을 일시 정지하려고 함

1. 회원 관리 탭
2. 해당 회원 찾기
3. "비활성화" 버튼 클릭

→ 회원 로그인 불가
→ 재활성화하면 다시 로그인 가능
```

---

## 🔐 보안 기능

1. **비밀번호 해시**: bcrypt로 안전하게 저장
2. **JWT 토큰**: 로그인 시 7일 유효 토큰 발급
3. **권한 검증**:
    - 관리자만 회원 생성/수정/삭제 가능
    - 회원은 자신의 대시보드만 접근 가능
4. **활성화 상태**: 비활성화된 회원은 로그인 차단

---

## 📊 회원 vs 관리자 비교

| 구분          | 관리자 (Admin)     | 일반 회원 (Member)  |
| ------------- | ------------------ | ------------------- |
| 로그인 페이지 | `/admin/login`     | `/member/login`     |
| 대시보드      | `/admin/super`     | `/member/dashboard` |
| 계정 생성     | Super Admin이 생성 | 관리자가 생성       |
| 로그인 방식   | 이메일 + 비밀번호  | 아이디 + 비밀번호   |
| 추가 정보     | 이름, 역할         | 상호명              |
| 권한          | 전체 시스템 관리   | 제한된 기능         |

---

## 🛠️ 관리자 가이드

### 회원 계정 생성 시 주의사항

1. **아이디 규칙**

    - 3자 이상
    - 중복 불가
    - 추천: 회사명\_영문 (예: abc_company)

2. **비밀번호 규칙**

    - 4자 이상
    - 회원에게 전달 후 변경 권장

3. **상호명**
    - 회사명 또는 개인명
    - 대시보드에 표시됨

### 회원 관리 팁

-   **비활성화**: 계정 삭제 대신 일시 정지
-   **마지막 로그인**: 활동 여부 확인
-   **삭제**: 복구 불가능하므로 신중히

---

## 🎨 커스터마이징

### 회원 대시보드 기능 추가

현재 회원 대시보드는 기본 템플릿입니다.
추가 가능한 기능:

1. **내 제출 내역 보기**
2. **포트폴리오 전용 뷰**
3. **공지사항**
4. **문의하기**
5. **프로필 수정**

파일 위치: `app/member/dashboard/page.tsx`

---

## 🔄 업데이트 내역

### v1.0 (현재)

-   ✅ 회원 CRUD 기능
-   ✅ 회원 로그인/로그아웃
-   ✅ 회원 대시보드
-   ✅ 활성화/비활성화 기능
-   ✅ 관리자 통합 관리

---

## 📝 체크리스트

### 로컬 테스트

-   [ ] Prisma 스키마 푸시 완료
-   [ ] 관리자 페이지에서 회원 생성
-   [ ] 회원 로그인 테스트
-   [ ] 회원 대시보드 접속
-   [ ] 회원 비활성화/활성화 테스트
-   [ ] 회원 삭제 테스트

### 프로덕션 배포

-   [ ] Git push 완료
-   [ ] Vercel 배포 완료
-   [ ] 프로덕션에서 회원 생성 테스트
-   [ ] 프로덕션에서 회원 로그인 테스트

---

## 🆘 문제 해결

### "인증이 필요합니다" 오류

-   로그인이 만료됨
-   다시 로그인하세요

### "비활성화된 계정입니다" 오류

-   관리자가 계정을 비활성화함
-   관리자에게 문의하세요

### "이미 존재하는 아이디입니다" 오류

-   중복된 아이디
-   다른 아이디로 시도하세요

---

## 🌐 URL 정리

### 로컬 개발

```
회원 로그인: http://localhost:3000/member/login
회원 대시보드: http://localhost:3000/member/dashboard
관리자 (회원 관리): http://localhost:3000/admin/super
```

### 프로덕션

```
회원 로그인: https://aw-portfolio-chi.vercel.app/member/login
회원 대시보드: https://aw-portfolio-chi.vercel.app/member/dashboard
관리자 (회원 관리): https://aw-portfolio-chi.vercel.app/admin/super
```

---

## 💡 다음 단계 (선택사항)

1. **비밀번호 변경 기능** 추가
2. **회원별 제출 내역** 보기
3. **회원 그룹/카테고리** 관리
4. **이메일 알림** 기능
5. **회원 활동 로그** 기록

---

**모든 기능이 정상 작동합니다!** 🎉

배포 완료 후 바로 사용 가능합니다.
